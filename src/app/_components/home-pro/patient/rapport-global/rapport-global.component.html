<div class="report" id="htmlData">

  <button id="printPageButton" nbButton status="primary" fullWidth (click)="printPDF()">
    Imprimer
  </button>
  <nb-card class="head">
    <nb-card-body>
      <div>
        <nb-card>
          <nb-card-body>
            <h2>Rapport global</h2>
          </nb-card-body>
        </nb-card>
      </div>

      <nb-card class="infos">
        <nb-card-body>
          <p><b>Nom :</b> {{patient?.firstName}}</p>
          <p><b>Prenom :</b> {{patient?.lastName}}</p>
          <p><b>Date de naissance :</b> {{patient?.birthday}}</p>
          <p><b>Genre :</b> {{patient?.gender}}</p>
          <p><b>E-mail :</b> {{patient?.contact.email}}</p>
          <p><b>Numéro de téléphone :</b> {{patient?.contact.phone}}</p>
          <p><b>Pin :</b> {{patient?.loginCode}}</p>
        </nb-card-body>
      </nb-card>

      <nb-card class="clinical-examination">
        <nb-card-body>
          <h2>Examen clinique</h2>
          <p *ngIf="patient?.medicalFile.clinicalExamination.length === 0">Pas d'examen clinique</p>
        </nb-card-body>
        <nb-card *ngIf="patient?.medicalFile.clinicalExamination.length > 0">
          <nb-card-body *ngFor="let ce of patient?.medicalFile.clinicalExamination">
            <p><b>Date : </b>{{ce.date}}</p>
            <h5>Anthropometry</h5>
            <table class="table table-hover">
              <thead>
              <tr>
                <th scope="col">Poids</th>
                <th scope="col">Hauteur</th>
                <th scope="col">IMC</th>
                <th scope="col">Taille</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>{{ce.anthropometry.weight}}</td>
                <td>{{ce.anthropometry.height}}</td>
                <td>{{ce.anthropometry.imc}}</td>
                <td>{{ce.anthropometry.waist}}</td>
              </tr>
              </tbody>
            </table>
            <h5>Cardiovasculaire</h5>
            <table class="table table-hover">
              <thead>
              <tr>
                <th scope="col">TA (bras D) Diastolique</th>
                <th scope="col">TA (bras G) Diastolique</th>
                <th scope="col">TA (bras D) Systolique</th>
                <th scope="col">TA (bras G) Systolique</th>
                <th scope="col">FC (repos)</th>
                <th scope="col">Regulier</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>{{ce.cardiovascular.bloodPressure.bloodPressureRightHandDiastolique}}</td>
                <td>{{ce.cardiovascular.bloodPressure.bloodPressureLeftHandDiastolique}}</td>
                <td>{{ce.cardiovascular.bloodPressure.bloodPressureRightHandSystolique}}</td>
                <td>{{ce.cardiovascular.bloodPressure.bloodPressureLeftHandDiastolique}}</td>
                <td>{{ce.cardiovascular.heartRate.value}}</td>
                <td *ngIf="ce.cardiovascular.heartRate.regular === true">Oui</td>
                <td *ngIf="ce.cardiovascular.heartRate.regular === false">Non</td>
              </tr>
              </tbody>
            </table>
          </nb-card-body>
        </nb-card>
      </nb-card>

      <nb-card class="lipid-profile">
        <nb-card-body>
          <h2>Bilan lipidique</h2>
          <p *ngIf="patient?.medicalFile.lipidProfiles.length === 0">Pas de bilan lipidique</p>
        </nb-card-body>
        <nb-card *ngIf="patient?.medicalFile.lipidProfiles.length > 0">
          <nb-card-body *ngFor="let lp of patient?.medicalFile.lipidProfiles">
            <p><b>Date : </b>{{lp.date}}</p>
            <table class="table table-hover">
              <thead>
              <tr>
                <th scope="col">HDL</th>
                <th scope="col">NOHDL</th>
                <th scope="col">HBA1C</th>
                <th scope="col">LDL</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>{{lp.hdl}}</td>
                <td>{{lp.nohdl}}</td>
                <td>{{lp.hba1c}}</td>
                <td>{{lp.ldl}}</td>
              </tr>
              </tbody>
            </table>
          </nb-card-body>
        </nb-card>
      </nb-card>

      <nb-card class="questionnaire">
        <nb-card-body>
        <h2>Questionnaires</h2>
        <p *ngIf="questionnaireObj.length === 0">Pas de questionnaires</p>
        </nb-card-body>
        <nb-card-body *ngIf="questionnaireObj.length > 0">
          <h4>BREQ</h4>
          <nb-card-body *ngIf="!breq">
            <p >Pas de questionnaire BREQ</p>
          </nb-card-body>
          <nb-card *ngIf="breq">
            <div *ngFor="let q of questionnaires">
              <nb-card-body *ngIf="q.type === 'BREQ'">
                <p><b>Date : </b>{{q.date}}</p>

                <table class="table table-hover">
                  <thead>
                  <tr>
                    <th scope="col">Amotivation</th>
                    <th scope="col">External</th>
                    <th scope="col">Identified</th>
                    <th scope="col">Intrinsic</th>
                    <th scope="col">introjected</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td>{{breqScore.at(0).amotivation}}</td>
                    <td>{{breqScore.at(0).external}}</td>
                    <td>{{breqScore.at(0).identified}}</td>
                    <td>{{breqScore.at(0).intrinsic}}</td>
                    <td>{{breqScore.at(0).introjected}}</td>
                  </tr>
                  </tbody>
                </table>


              </nb-card-body>
            </div>
          </nb-card>


          <h4>GPAQ</h4>
          <nb-card-body *ngIf="!gpaq">
            <p>Pas de questionnaire GPAQ</p>
          </nb-card-body>
          <nb-card *ngIf="gpaq">
            <div *ngFor="let q of questionnaires">
              <nb-card-body *ngIf="q.type === 'GPAQ'">
                <p><b>Date : </b>{{q.date}}</p>

              </nb-card-body>
            </div>

          </nb-card>
        </nb-card-body>
      </nb-card>
    </nb-card-body>
  </nb-card>
</div>

